{% load static from staticfiles %}
{% load socialaccount %}

<!DOCTYPE HTML>
<html lang="en">

<head>

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8">


	<!-- Font -->

	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


	<!-- Stylesheets -->

	<!-- <link href="{% static '/common-css/bootstrap.css' %}" rel="stylesheet"> -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<link href="{% static '/common-css/ionicons.css' %}" rel="stylesheet">


	<link href="{% static '/layout-1/css/styles.css' %}" rel="stylesheet">

	<link href="{% static '/layout-1/css/responsive.css' %}" rel="stylesheet">

	<link href="{% static 'blank-static/css/styles.css' %}" rel="stylesheet">

	<link href="{% static 'blank-static/css/responsive.css' %}" rel="stylesheet">

	<link href="{% static 'blog-sidebar/css/styles.css' %}" rel="stylesheet">

	<link href="{% static 'blog-sidebar/css/responsive.css' %}" rel="stylesheet">

	<link href="{% static 'logout/styles.css' %}" rel="stylesheet">

	<link href="{% static 'profile-img/styles.css' %}" rel="stylesheet">



	{% if title %}
	<title>LearnPost - {{ title }}</title>
	{% else %}
	<title>LearnPost</title>
	{% endif %}




</head>

<body>

	<header>
		<div class="container-fluid position-relative no-side-padding ">

			<a href="{% url 'blog-home' %}" class="logo"><img src="{% static 'images/logo_red.png' %}"
					alt="Logo Image"></a>

			<div class="menu-nav-icon" data-nav-menu="#main-menu"><i class="ion-navicon"></i></div>

			<ul class="main-menu visible-on-click" id="main-menu">
				<li><a href="{% url 'blog-home' %}">Home</a></li>
				<li><a href="{% url 'blog-about' %}">About</a></li>
			</ul><!-- main-menu -->

			<!-- <div class="src-area">
				<form>
					<button class="src-btn" type="submit"><i class="ion-ios-search-strong"></i></button>
					<input class="src-input" type="text" placeholder="Type of search">
				</form>
			</div> -->
			{% if user.is_authenticated %}
				<ul class="accounts-menu visible-on-click" id="accounts-menu">
					<li><a href="{% url 'post-create' %}"><i class="mr-2 ion-plus"></i>New Post</a></li>
					<li><a  href="{% url 'profile' %}">{{ user.username }}</a></li>
					<li><a href="{% url 'logout' %}"><i class="mr-2 ion-log-out"></i>Logout</a></li>
				</ul><!-- main-menu -->
			{% else %}
				<ul class="accounts-menu visible-on-click" id="accounts-menu">
					<li><a href="{% provider_login_url 'facebook' method='js_sdk' %}"class="btn btn-block btn-social btn-facebook" style="background-color:#3b5998; color:white; text-align:center">
							<span class="fa fa-facebook"></span>
										 Login in with Facebook</a></li>
					<li><a href="{% url 'login' %}"><i class="mr-2 ion-log-in"></i>Login</a></li>
					<li><a href="{% url 'register' %}"><i class="mr-2 ion-android-create"></i>SignUp</a></li>
				</ul><!-- main-menu -->
			{% endif %}
		</div><!-- conatiner -->
	</header>

	<main>
		<section class="blog-area section">
			<div class="container">
				<div class="row">

					{% block content %}
					{% endblock %}

					<div class="col-lg-4 col-md-12">
						<div class="single-post info-area ">

							<div class="about-area">
								<h4 class="title"><b>ABOUT LEARNPOST</b></h4>
								<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
									incididunt
									ut labore et dolore magna aliqua. Lorem ipsum dolor sit amet, consectetur
									Ut enim ad minim veniam</p>
							</div>

							<div class="subscribe-area">

								<h4 class="title"><b>SUBSCRIBE</b></h4>
								<div class="input-area">
									<form>
										<input class="email-input" type="text" placeholder="Enter your email">
										<button class="submit-btn" type="submit"><i
												class="ion-ios-email-outline"></i></button>
									</form>
								</div>

							</div><!-- subscribe-area -->

							<div class="tag-area">

								<h4 class="title"><b>TAG CLOUD</b></h4>
								<ul>
									<li><a href="#">Manual</a></li>
									<li><a href="#">Liberty</a></li>
									<li><a href="#">Recomendation</a></li>
									<li><a href="#">Interpritation</a></li>
									<li><a href="#">Manual</a></li>
									<li><a href="#">Liberty</a></li>
									<li><a href="#">Recomendation</a></li>
									<li><a href="#">Interpritation</a></li>
								</ul>

							</div><!-- subscribe-area -->

						</div><!-- info-area -->
					</div>

				</div><!-- row -->

			</div><!-- container -->
		</section><!-- section -->


	</main>

	<footer>

		<div class="container">
			<div class="row">

				<div class="col-lg-4 col-md-6">
					<div class="footer-section">

						<a class="logo" href="{% url 'blog-home' %}"><img src="{% static 'images/logo_red.png' %}"
								alt="Logo Image"></a>
						<a id="username" hidden data-username="{{user.username}}"></a> 
						<p class="copyright">learnpost @ {{ date }}. All rights reserved.</p>
						<p class="copyright">Designed by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
						<ul class="icons">
							<li><a href="#"><i class="ion-social-facebook-outline"></i></a></li>
							<li><a href="#"><i class="ion-social-twitter-outline"></i></a></li>
							<li><a href="#"><i class="ion-social-instagram-outline"></i></a></li>
							<li><a href="#"><i class="ion-social-vimeo-outline"></i></a></li>
							<li><a href="#"><i class="ion-social-pinterest-outline"></i></a></li>
						</ul>

					</div><!-- footer-section -->
				</div><!-- col-lg-4 col-md-6 -->

				<div class="col-lg-4 col-md-6">
					<div class="footer-section">
						<h4 class="title"><b>CATAGORIES</b></h4>
						<ul>
							<li><a href="#">BEAUTY</a></li>
							<li><a href="#">HEALTH</a></li>
							<li><a href="#">MUSIC</a></li>
						</ul>
						<ul>
							<li><a href="#">SPORT</a></li>
							<li><a href="#">DESIGN</a></li>
							<li><a href="#">TRAVEL</a></li>
						</ul>
					</div><!-- footer-section -->
				</div><!-- col-lg-4 col-md-6 -->

				<div class="col-lg-4 col-md-6">
					<div class="footer-section">

						<h4 class="title"><b>SUBSCRIBE</b></h4>
						<div class="input-area">
							<form>
								<input class="email-input" type="text" placeholder="Enter your email">
								<button class="submit-btn" type="submit"><i
										class="icon ion-ios-email-outline"></i></button>
										
							</form>
						</div>

					</div><!-- footer-section -->
				</div><!-- col-lg-4 col-md-6 -->

			</div><!-- row -->
		</div><!-- container -->
	</footer>


	<!-- SCIPTS -->

	
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
	</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
	</script>

	<script src="{% static 'common-js/jquery-3.1.1.min.js' %}"></script>
	

	
	<script src="{% static 'common-js/tether.min.js' %}"></script>

	<script src="{% static 'common-js/bootstrap.js' %}"></script>

	{% block jquery %}  
	{% endblock jquery %}
	{% providers_media_js %}
	<script src="{% static 'common-js/scripts.js' %}"></script>
	{% block facebookjs %}
	  <script>
		  console.log($('#username').attr("data-username"));
			// This is called with the results from from FB.getLoginStatus().
			function statusChangeCallback(response) {
			  console.log('statusChangeCallback');
			  console.log(response);
			  // The response object is returned with a status field that lets the
			  // app know the current login status of the person.
			  // Full docs on the response object can be found in the documentation
			  // for FB.getLoginStatus().
			  if (response.status === 'connected') {
				// Logged into your app and Facebook.
				testAPI();
			  } else {
				// The person is not logged into your app or we are unable to tell.
				document.getElementById('status').innerHTML = 'Please log ' +
				  'into this app.';
			  }
			}
		  
			// This function is called when someone finishes with the Login
			// Button.  See the onlogin handler attached to it in the sample
			// code below.
			function checkLoginState() {
			  FB.getLoginStatus(function(response) {
				statusChangeCallback(response);
			  });
			}
		  
			window.fbAsyncInit = function() {
				FB.init({
					appId      : '2568201606542522',
					xfbml      : true,
					version    : 'v3.2'
				});
		  
			  // Now that we've initialized the JavaScript SDK, we call 
			  // FB.getLoginStatus().  This function gets the state of the
			  // person visiting this page and can return one of three states to
			  // the callback you provide.  They can be:
			  //
			  // 1. Logged into your app ('connected')
			  // 2. Logged into Facebook, but not your app ('not_authorized')
			  // 3. Not logged into Facebook and can't tell if they are logged into
			  //    your app or not.
			  //
			  // These three cases are handled in the callback function.
		  
			  FB.getLoginStatus(function(response) {
				statusChangeCallback(response);
			  });
			};
		  
			// Load the SDK asynchronously
			(function(d, s, id) {
			  var js, fjs = d.getElementsByTagName(s)[0];
			  console.log(s);
			  if (d.getElementById(id)) return;
			  js = d.createElement(s); js.id = id;
			  js.src = "https://connect.facebook.net/en_US/sdk.js";
			  fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
		  
			// Here we run a very simple test of the Graph API after login is
			// successful.  See statusChangeCallback() for when this call is made.
			function testAPI() {
			  console.log('Welcome!  Fetching your information.... ');
			 
			  FB.api('/me', function(response) {
				console.log('Successful login for: ' + response.name);
				console.log(response);
				document.getElementById('status').innerHTML =
				  'Thanks for logging in, ' + response.name + '!';
			  });
			 
			
			}
			setTimeout(()=>{
				console.log('--------',$('#username').attr("data-username"));
				$.ajax({
					url: "{% url 'login_api' %}",
					method: "POST",
					data: {
						"username": $('#username').attr("data-username"),
						"password": ''
					},
					success: function(data) {
					console.log(data['token']);
					localStorage.setItem('token',data['token']);
					}
				});
			},3000);
			
		  </script>
		{% endblock facebookjs %}
</body>

</html>